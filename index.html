<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Современный Редактор Кода</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary-bg: #1E1E2E;
            --sidebar-bg: #1A1B2E;
            --accent-gradient: linear-gradient(135deg, #FF6B6B, #9B6BFF);
            --panel-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.1);
        }

        body {
            background: var(--primary-bg);
            color: #fff;
            min-height: 100vh;
            display: flex;
        }

        /* сколько iq у верстальщика? да  */
        .sidebar {
            width: 80px;
            background: var(--sidebar-bg);
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            border-right: 1px solid var(--border-color);
        }

        .logo {
            width: 40px;
            height: 40px;
            background: var(--accent-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .nav-item {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 20px;
        }

        .nav-item:hover, .nav-item.active {
            background: var(--panel-bg);
            color: #FF6B6B;
        }

        /* а кста го анектдот про 1с? да ладно иx  нету это мифы про 1сников   */
        .main-content {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        .editors-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .editor-container {
            flex: 1;
            background: var(--panel-bg);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
        }

        .editor-header {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        .html-dot { background: #FF6B6B; color: rgba(255, 107, 107, 0.5); }
        .css-dot { background: #6B9BFF; color: rgba(107, 155, 255, 0.5); }
        .js-dot { background: #FFD93D; color: rgba(255, 217, 61, 0.5); }

        textarea {
            width: 100%;
            height: calc(100% - 55px);
            background: transparent;
            border: none;
            color: #fff;
            padding: 20px;
            resize: none;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
        }

        /* ктсати етот код писал derxwather !пон? */
        .preview-section {
            width: 45%;
            background: var(--panel-bg);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .preview-header {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
        }

        .preview-frame {
            width: 100%;
            height: calc(100% - 55px);
            border: none;
            background: white;
        }

        /* агу агу кнопаЧКА бебебе*/
        .button-group {
            display: flex;
            gap: 10px;
        }

        .run-btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .auto-update {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background: var(--accent-gradient);
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .editor-container, .preview-section {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Дополнительные стили  либо шись малина чочта*/
        .header-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* настройка тупого  скроллбара */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Стили для развернутого редактора */
        .editor-container.expanded {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            z-index: 1000;
            margin: 0;
            animation: expandEditor 0.3s ease-out;
        }

        @keyframes expandEditor {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            animation: fadeIn 0.3s ease-out;
            backdrop-filter: blur(3px);
        }

        .copy-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent-gradient);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            animation: fadeIn 0.3s ease-out;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .editor-container.expanded textarea {
            font-size: 16px;
            line-height: 1.6;
        }

        /* тут водяной снак по етомц удаляйте код наxу */
        .watermark {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.3);
            pointer-events: none;
            z-index: 1000;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #FF6B6B, #9B6BFF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: lowercase;
            animation: fadeIn 1s ease-out;
        }

        /* проверка у тебя печка или ипxончек для адаптивности */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: 60px;
                flex-direction: row;
                padding: 0 20px;
                position: fixed;
                top: 0;
                z-index: 100;
                backdrop-filter: blur(10px);
            }

            .logo {
                width: 35px;
                height: 35px;
                margin: 0;
                font-size: 16px;
            }

            .nav-item {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .main-content {
                margin-top: 70px;
                flex-direction: column;
                padding: 10px;
                gap: 10px;
            }

            .editors-section {
                gap: 10px;
            }

            .preview-section {
                width: 100%;
            }

            /* Мобильное меню редакторов */
            .editors-tabs {
                display: flex;
                gap: 5px;
                margin-bottom: 10px;
                overflow-x: auto;
                padding: 5px;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .editors-tabs::-webkit-scrollbar {
                display: none;
            }

            .editor-tab {
                padding: 8px 15px;
                background: var(--panel-bg);
                border-radius: 8px;
                color: #fff;
                cursor: pointer;
                white-space: nowrap;
                border: 1px solid var(--border-color);
                transition: all 0.3s;
            }

            .editor-tab.active {
                background: var(--accent-gradient);
                border-color: transparent;
            }

            .editor-container {
                display: none;
            }

            .editor-container.active {
                display: block;
                height: 300px;
            }

            .preview-section {
                height: 300px;
            }

            /* Мобильные настройки */
            .settings-panel {
                margin-top: 70px;
            }

            /* Мобильные уведомления */
            .copy-notification {
                bottom: 70px;
            }

            /* Мобильное модальное окно */
            .share-modal, .modal {
                width: 90% !important;
                max-width: none !important;
            }

            /* Водяной знак для мобильных */
            .watermark {
                bottom: 10px;
                right: 10px;
                font-size: 12px;
            }

            /* Кнопки действий */
            .action-btn {
                width: 35px;
                height: 35px;
            }

            .run-btn {
                padding: 6px 12px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="watermark">by aderxwather</div>
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-code"></i>
        </div>
        <div class="nav-item active" data-action="edit" title="Редактор">
            <i class="fas fa-edit"></i>
        </div>
        <div class="nav-item" data-action="settings" title="Настройки">
            <i class="fas fa-cog"></i>
        </div>
        <div class="nav-item" data-action="save" title="Сохранить">
            <i class="fas fa-save"></i>
        </div>
        <div class="nav-item" data-action="share" title="Поделиться">
            <i class="fas fa-share"></i>
        </div>
    </div>
    <div class="main-content">
        <div class="editors-section">
            <div class="editors-tabs">
                <div class="editor-tab active" data-editor="html">HTML</div>
                <div class="editor-tab" data-editor="css">CSS</div>
                <div class="editor-tab" data-editor="js">JavaScript</div>
            </div>
            <div class="editor-container">
                <div class="editor-header">
                    <div class="header-left">
                        <div class="language-dot html-dot"></div>
                        <span>HTML</span>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn"><i class="fas fa-copy"></i></button>
                        <button class="action-btn"><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <textarea id="htmlEditor" placeholder="Введите HTML код...">&lt;div class="welcome"&gt;
    &lt;h1&gt;Современный редактор кода&lt;/h1&gt;
    &lt;p&gt;Создавайте красивые веб-проекты&lt;/p&gt;
&lt;/div&gt;</textarea>
            </div>
            <div class="editor-container">
                <div class="editor-header">
                    <div class="header-left">
                        <div class="language-dot css-dot"></div>
                        <span>CSS</span>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn"><i class="fas fa-copy"></i></button>
                        <button class="action-btn"><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <textarea id="cssEditor" placeholder="Введите CSS код...">.welcome {
    text-align: center;
    padding: 2rem;
    background: linear-gradient(135deg, #FF6B6B22, #9B6BFF22);
    border-radius: 16px;
    backdrop-filter: blur(10px);
}

h1 {
    color: #fff;
    font-size: 2.5rem;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #FF6B6B, #9B6BFF);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

p {
    color: #fff;
    font-size: 1.2rem;
    opacity: 0.8;
}</textarea>
            </div>
            <div class="editor-container">
                <div class="editor-header">
                    <div class="header-left">
                        <div class="language-dot js-dot"></div>
                        <span>JavaScript</span>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn"><i class="fas fa-copy"></i></button>
                        <button class="action-btn"><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <textarea id="jsEditor" placeholder="Введите JavaScript код...">// Добавляем анимацию
document.querySelector('.welcome').style.animation = 'fadeIn 1s ease-out';</textarea>
            </div>
        </div>
        <div class="preview-section">
            <div class="preview-header">
                <div class="auto-update">
                    <label class="switch">
                        <input type="checkbox" id="autoUpdate" checked>
                        <span class="slider"></span>
                    </label>
                    <span>Автообновление</span>
                </div>
                <button class="run-btn">
                    <i class="fas fa-play"></i>
                    Запустить
                </button>
            </div>
            <iframe class="preview-frame" id="preview"></iframe>
        </div>
    </div>

    <script>
        let updateTimeout;
        let autoSaveInterval;

        // Функция для получения всего кода
        function getAllCode() {
            return `<!DOCTYPE html>
<html>
<head>
<style>
${document.getElementById('cssEditor').value}
</style>
</head>
<body>
${document.getElementById('htmlEditor').value}
<script>
${document.getElementById('jsEditor').value}
<\/script>
</body>
</html>`;
        }

        // Функция для сохранения кода
        function saveCode() {
            const saveData = {
                html: document.getElementById('htmlEditor').value,
                css: document.getElementById('cssEditor').value,
                js: document.getElementById('jsEditor').value,
                timestamp: new Date().toLocaleString(),
                settings: {
                    theme: document.getElementById('themeSelect')?.value || 'dark',
                    fontSize: document.getElementById('fontSizeRange')?.value || '14',
                    autoSave: document.getElementById('autoSaveToggle')?.checked || false
                }
            };
            localStorage.setItem('savedCode', JSON.stringify(saveData));
            showNotification('Код успешно сохранен!');
        }

        // Функция для показа уведомлений
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }

        // Функция для применения темы
        function applyTheme(theme) {
            const root = document.documentElement;
            if (theme === 'light') {
                root.style.setProperty('--primary-bg', '#f5f5f5');
                root.style.setProperty('--sidebar-bg', '#ffffff');
                root.style.setProperty('--panel-bg', 'rgba(0, 0, 0, 0.05)');
                root.style.setProperty('--border-color', 'rgba(0, 0, 0, 0.1)');
                document.body.style.color = '#333';
            } else {
                root.style.setProperty('--primary-bg', '#1E1E2E');
                root.style.setProperty('--sidebar-bg', '#1A1B2E');
                root.style.setProperty('--panel-bg', 'rgba(255, 255, 255, 0.05)');
                root.style.setProperty('--border-color', 'rgba(255, 255, 255, 0.1)');
                document.body.style.color = '#fff';
            }
        }

        // Обработчик для кнопки "Поделиться"
        function handleShare() {
            const modal = document.createElement('div');
            modal.className = 'share-modal';
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--primary-bg);
                padding: 20px;
                border-radius: 16px;
                border: 1px solid var(--border-color);
                z-index: 1000;
                width: 400px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;

            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            overlay.addEventListener('click', () => {
                overlay.remove();
                modal.remove();
            });

            modal.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: var(--text-color);">Поделиться кодом</h3>
                    <button class="action-btn" onclick="this.closest('.share-modal').remove(); document.querySelector('.overlay').remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button class="run-btn" onclick="navigator.clipboard.writeText(getAllCode()); showNotification('Код скопирован!')">
                        <i class="fas fa-copy"></i> Копировать весь код
                    </button>
                    <button class="run-btn" onclick="navigator.clipboard.writeText(window.location.href); showNotification('Ссылка скопирована!')">
                        <i class="fas fa-link"></i> Копировать ссылку
                    </button>
                </div>
            `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }

        // Обновляем обработчик настроек
        function initializeSettings() {
            const savedCode = localStorage.getItem('savedCode');
            if (savedCode) {
                const data = JSON.parse(savedCode);
                if (data.settings) {
                    // Применяем сохраненные настройки
                    const themeSelect = document.getElementById('themeSelect');
                    const fontSizeRange = document.getElementById('fontSizeRange');
                    const autoSaveToggle = document.getElementById('autoSaveToggle');

                    if (themeSelect) {
                        themeSelect.value = data.settings.theme;
                        applyTheme(data.settings.theme);
                    }
                    if (fontSizeRange) {
                        fontSizeRange.value = data.settings.fontSize;
                        document.querySelectorAll('textarea').forEach(textarea => {
                            textarea.style.fontSize = data.settings.fontSize + 'px';
                        });
                    }
                    if (autoSaveToggle) {
                        autoSaveToggle.checked = data.settings.autoSave;
                        if (data.settings.autoSave) {
                            startAutoSave();
                        }
                    }
                }
            }
        }

        // Функция для автосохранения
        function startAutoSave() {
            if (autoSaveInterval) clearInterval(autoSaveInterval);
            autoSaveInterval = setInterval(saveCode, 30000); // Автосохранение каждые 30 секунд
        }

        // Обновляем обработчики событий
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация настроек
            initializeSettings();

            // Обработчики для настроек
            document.getElementById('themeSelect')?.addEventListener('change', function() {
                applyTheme(this.value);
                saveCode();
            });

            document.getElementById('fontSizeRange')?.addEventListener('input', function() {
                const size = this.value;
                document.getElementById('fontSizeValue').textContent = size + 'px';
                document.querySelectorAll('textarea').forEach(textarea => {
                    textarea.style.fontSize = size + 'px';
                });
                saveCode();
            });

            document.getElementById('autoSaveToggle')?.addEventListener('change', function() {
                if (this.checked) {
                    startAutoSave();
                } else {
                    clearInterval(autoSaveInterval);
                }
                saveCode();
            });
        });

        // Обновляем обработчик для кнопки "Поделиться"
        document.querySelectorAll('.nav-item[data-action="share"]').forEach(item => {
            item.addEventListener('click', handleShare);
        });

        function updatePreview() {
            const html = document.getElementById('htmlEditor').value;
            const css = document.getElementById('cssEditor').value;
            const js = document.getElementById('jsEditor').value;

            const preview = document.getElementById('preview');
            const previewDoc = preview.contentDocument || preview.contentWindow.document;

            const content = `
                <!DOCTYPE html>
                <html>
                    <head>
                        <style>${css}</style>
                    </head>
                    <body>
                        ${html}
                        <script>${js}<\/script>
                    </body>
                </html>
            `;

            previewDoc.open();
            previewDoc.write(content);
            previewDoc.close();
        }

        function debounceUpdate() {
            if (document.getElementById('autoUpdate').checked) {
                clearTimeout(updateTimeout);
                updateTimeout = setTimeout(updatePreview, 500);
            }
        }

        // Автоматическое обновление при загрузке
        window.onload = updatePreview;

        // Живое обновление при вводе
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', debounceUpdate);
            
            // Поддержка Tab
            textarea.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = this.selectionStart;
                    const end = this.selectionEnd;
                    this.value = this.value.substring(0, start) + '    ' + this.value.substring(end);
                    this.selectionStart = this.selectionEnd = start + 4;
                }
            });
        });

        // Обработка кликов по кнопкам действий
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const action = this.querySelector('i').classList.contains('fa-copy') ? 'copy' : 'expand';
                const container = this.closest('.editor-container');
                const textarea = container.querySelector('textarea');

                if (action === 'copy') {
                    // Копируем текст
                    navigator.clipboard.writeText(textarea.value).then(() => {
                        // Показываем уведомление
                        const notification = document.createElement('div');
                        notification.className = 'copy-notification';
                        notification.textContent = 'Код скопирован!';
                        document.body.appendChild(notification);
                        setTimeout(() => notification.remove(), 2000);
                    });
                } else {
                    // Разворачиваем/сворачиваем редактор
                    if (!container.classList.contains('expanded')) {
                        // Создаем затемнение
                        const overlay = document.createElement('div');
                        overlay.className = 'overlay';
                        document.body.appendChild(overlay);
                        
                        // Разворачиваем редактор
                        container.classList.add('expanded');
                        this.querySelector('i').classList.remove('fa-expand');
                        this.querySelector('i').classList.add('fa-compress');
                        
                        // Сохраняем оригинальную позицию
                        container.dataset.originalParent = container.parentElement.className;
                        document.body.appendChild(container);

                        // Добавляем обработчик клика по оверлею
                        overlay.addEventListener('click', () => {
                            this.click(); // Симулируем клик по кнопке сворачивания
                        });
                    } else {
                        // Убираем затемнение
                        document.querySelector('.overlay')?.remove();
                        
                        // Сворачиваем редактор
                        container.classList.remove('expanded');
                        this.querySelector('i').classList.remove('fa-compress');
                        this.querySelector('i').classList.add('fa-expand');
                        
                        // Возвращаем на место
                        const originalParent = document.querySelector('.' + container.dataset.originalParent);
                        if (originalParent) {
                            originalParent.appendChild(container);
                        }
                    }
                }
            });
        });

        // Обработка кликов по навигации с добавленной функциональностью
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const action = this.getAttribute('data-action');
                document.querySelector('.nav-item.active').classList.remove('active');
                this.classList.add('active');

                switch(action) {
                    case 'edit':
                        // Показываем основной интерфейс редактора
                        document.querySelector('.main-content').style.display = 'flex';
                        if (document.querySelector('.settings-panel')) {
                            document.querySelector('.settings-panel').style.display = 'none';
                        }
                        break;

                    case 'settings':
                        // Создаем и показываем панель настроек, если её еще нет
                        let settingsPanel = document.querySelector('.settings-panel');
                        if (!settingsPanel) {
                            settingsPanel = document.createElement('div');
                            settingsPanel.className = 'settings-panel';
                            settingsPanel.innerHTML = `
                                <div class="editor-container" style="height: calc(100vh - 40px);">
                                    <div class="editor-header">
                                        <div class="header-left">
                                            <i class="fas fa-cog"></i>
                                            <span>Настройки</span>
                                        </div>
                                    </div>
                                    <div class="settings-content" style="padding: 20px; color: white;">
                                        <h2 style="margin-bottom: 20px;">Настройки редактора</h2>
                                        
                                        <div class="setting-item" style="margin-bottom: 15px;">
                                            <label style="display: block; margin-bottom: 10px;">Тема редактора</label>
                                            <select id="themeSelect" style="background: var(--panel-bg); color: white; padding: 8px; border-radius: 8px; border: 1px solid var(--border-color); width: 200px;">
                                                <option value="dark">Тёмная</option>
                                                <option value="light">Светлая</option>
                                            </select>
                                        </div>

                                        <div class="setting-item" style="margin-bottom: 15px;">
                                            <label style="display: block; margin-bottom: 10px;">Размер шрифта</label>
                                            <input type="range" id="fontSizeRange" min="12" max="24" value="14" style="width: 200px;">
                                            <span id="fontSizeValue">14px</span>
                                        </div>

                                        <div class="setting-item" style="margin-bottom: 15px;">
                                            <label style="display: block; margin-bottom: 10px;">Автосохранение</label>
                                            <label class="switch">
                                                <input type="checkbox" id="autoSaveToggle" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            `;
                            document.querySelector('.main-content').after(settingsPanel);

                            // Обработчики для настроек
                            document.getElementById('fontSizeRange').addEventListener('input', function() {
                                const size = this.value;
                                document.getElementById('fontSizeValue').textContent = size + 'px';
                                document.querySelectorAll('textarea').forEach(textarea => {
                                    textarea.style.fontSize = size + 'px';
                                });
                                // Сохраняем настройки
                                const settings = {
                                    fontSize: size,
                                    theme: document.getElementById('themeSelect').value,
                                    autoSave: document.getElementById('autoSaveToggle').checked
                                };
                                localStorage.setItem('editorSettings', JSON.stringify(settings));
                            });

                            // Добавляем обработчик для выбора темы
                            document.getElementById('themeSelect').addEventListener('change', function() {
                                const theme = this.value;
                                const root = document.documentElement;
                                if (theme === 'light') {
                                    root.style.setProperty('--primary-bg', '#f5f5f5');
                                    root.style.setProperty('--sidebar-bg', '#ffffff');
                                    root.style.setProperty('--panel-bg', 'rgba(0, 0, 0, 0.05)');
                                    root.style.setProperty('--border-color', 'rgba(0, 0, 0, 0.1)');
                                    document.body.style.color = '#333';
                                } else {
                                    root.style.setProperty('--primary-bg', '#1E1E2E');
                                    root.style.setProperty('--sidebar-bg', '#1A1B2E');
                                    root.style.setProperty('--panel-bg', 'rgba(255, 255, 255, 0.05)');
                                    root.style.setProperty('--border-color', 'rgba(255, 255, 255, 0.1)');
                                    document.body.style.color = '#fff';
                                }
                                // Сохраняем настройки
                                const settings = {
                                    fontSize: document.getElementById('fontSizeRange').value,
                                    theme: theme,
                                    autoSave: document.getElementById('autoSaveToggle').checked
                                };
                                localStorage.setItem('editorSettings', JSON.stringify(settings));
                            });

                            // Добавляем обработчик для автосохранения
                            document.getElementById('autoSaveToggle').addEventListener('change', function() {
                                const isAutoSave = this.checked;
                                if (isAutoSave) {
                                    // Включаем автосохранение каждые 30 секунд
                                    window.autoSaveInterval = setInterval(() => {
                                        const saveData = {
                                            html: document.getElementById('htmlEditor').value,
                                            css: document.getElementById('cssEditor').value,
                                            js: document.getElementById('jsEditor').value
                                        };
                                        localStorage.setItem('savedCode', JSON.stringify(saveData));
                                    }, 30000);
                                } else {
                                    // Отключаем автосохранение
                                    if (window.autoSaveInterval) {
                                        clearInterval(window.autoSaveInterval);
                                    }
                                }
                                // Сохраняем настройки
                                const settings = {
                                    fontSize: document.getElementById('fontSizeRange').value,
                                    theme: document.getElementById('themeSelect').value,
                                    autoSave: isAutoSave
                                };
                                localStorage.setItem('editorSettings', JSON.stringify(settings));
                            });
                        }

                        document.querySelector('.main-content').style.display = 'none';
                        settingsPanel.style.display = 'block';
                        break;

                    case 'save':
                        // Сохраняем код в localStorage
                        const saveData = {
                            html: document.getElementById('htmlEditor').value,
                            css: document.getElementById('cssEditor').value,
                            js: document.getElementById('jsEditor').value,
                            timestamp: new Date().toLocaleString()
                        };
                        localStorage.setItem('savedCode', JSON.stringify(saveData));
                        
                        // Показываем уведомление о сохранении
                        const notification = document.createElement('div');
                        notification.style.cssText = `
                            position: fixed;
                            bottom: 20px;
                            right: 20px;
                            background: var(--accent-gradient);
                            color: white;
                            padding: 12px 20px;
                            border-radius: 8px;
                            animation: fadeIn 0.3s ease-out;
                            z-index: 1000;
                        `;
                        notification.textContent = 'Код успешно сохранен!';
                        document.body.appendChild(notification);
                        setTimeout(() => notification.remove(), 3000);
                        break;

                    case 'share':
                        // Создаем модальное окно для шеринга
                        const modal = document.createElement('div');
                        const overlay = document.createElement('div');
                        overlay.className = 'overlay';
                        
                        modal.style.cssText = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: var(--primary-bg);
                            padding: 20px;
                            border-radius: 16px;
                            border: 1px solid var(--border-color);
                            z-index: 1001;
                            width: 400px;
                            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                        `;
                        
                        const allCode = `<!DOCTYPE html>
<html>
<head>
<style>
${document.getElementById('cssEditor').value}
</style>
</head>
<body>
${document.getElementById('htmlEditor').value}
<script>
${document.getElementById('jsEditor').value}
<\/script>
</body>
</html>`;
                        
                        modal.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="color: white;">Поделиться кодом</h3>
                                <button class="action-btn" onclick="this.closest('div').parentElement.remove(); document.querySelector('.overlay').remove()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 15px;">
                                <button class="run-btn" onclick="navigator.clipboard.writeText(allCode); showNotification('Код скопирован!')">
                                    <i class="fas fa-copy"></i> Копировать весь код
                                </button>
                                <button class="run-btn" onclick="navigator.clipboard.writeText(window.location.href); showNotification('Ссылка скопирована!')">
                                    <i class="fas fa-link"></i> Копировать ссылку
                                </button>
                            </div>
                        `;
                        
                        document.body.appendChild(overlay);
                        document.body.appendChild(modal);

                        overlay.addEventListener('click', () => {
                            overlay.remove();
                            modal.remove();
                        });

                        function showNotification(message) {
                            const notification = document.createElement('div');
                            notification.className = 'copy-notification';
                            notification.textContent = message;
                            document.body.appendChild(notification);
                            setTimeout(() => notification.remove(), 2000);
                        }
                        break;
                }
            });
        });

        // Загружаем сохраненный код при запуске
        window.addEventListener('load', function() {
            const savedCode = localStorage.getItem('savedCode');
            if (savedCode) {
                const data = JSON.parse(savedCode);
                document.getElementById('htmlEditor').value = data.html;
                document.getElementById('cssEditor').value = data.css;
                document.getElementById('jsEditor').value = data.js;
                updatePreview();
            }
        });

        // Добавляем обработчики для мобильных табов
        if (window.innerWidth <= 768) {
            const tabs = document.querySelectorAll('.editor-tab');
            const editors = document.querySelectorAll('.editor-container');

            function showEditor(editorType) {
                editors.forEach(editor => {
                    const isMatchingEditor = (
                        (editorType === 'html' && editor.querySelector('.html-dot')) ||
                        (editorType === 'css' && editor.querySelector('.css-dot')) ||
                        (editorType === 'js' && editor.querySelector('.js-dot'))
                    );
                    if (isMatchingEditor) {
                        editor.style.display = 'block';
                        editor.classList.add('active');
                    } else {
                        editor.style.display = 'none';
                        editor.classList.remove('active');
                    }
                });
            }

            // Показываем HTML редактор при загрузке
            showEditor('html');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Убираем активный класс у всех табов
                    tabs.forEach(t => t.classList.remove('active'));
                    // Добавляем активный класс текущему табу
                    tab.classList.add('active');
                    // Показываем соответствующий редактор
                    showEditor(tab.getAttribute('data-editor'));
                });
            });
        }

        // Обновляем стили для мобильной версии
        const mobileStyles = document.createElement('style');
        mobileStyles.textContent = `
            @media (max-width: 768px) {
                .editor-container {
                    display: none;
                    height: 300px !important;
                    margin-bottom: 10px;
                }

                .editor-container.active {
                    display: block;
                }

                .editors-tabs {
                    display: flex;
                    gap: 5px;
                    margin-bottom: 10px;
                    padding: 5px;
                    overflow-x: auto;
                    -webkit-overflow-scrolling: touch;
                }

                .editor-tab {
                    padding: 8px 15px;
                    background: var(--panel-bg);
                    border-radius: 8px;
                    color: #fff;
                    cursor: pointer;
                    white-space: nowrap;
                    border: 1px solid var(--border-color);
                    transition: all 0.3s;
                    font-size: 14px;
                    display: flex;
                    align-items: center;
                    gap: 5px;
                }

                .editor-tab::before {
                    content: '';
                    display: inline-block;
                    width: 8px;
                    height: 8px;
                    border-radius: 50%;
                }

                .editor-tab[data-editor="html"]::before {
                    background: #FF6B6B;
                }

                .editor-tab[data-editor="css"]::before {
                    background: #6B9BFF;
                }

                .editor-tab[data-editor="js"]::before {
                    background: #FFD93D;
                }

                .editor-tab.active {
                    background: var(--accent-gradient);
                    border-color: transparent;
                }

                .preview-section {
                    height: 300px !important;
                }

                textarea {
                    height: calc(100% - 50px) !important;
                }
            }
        `;
        document.head.appendChild(mobileStyles);
    </script>
</body>
</html> 